<?xml version="1.0" encoding="utf-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<BorderPane styleClass="employee-root" stylesheets="@../styles/employee.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.shenanigans.features.employees.controller.EmployeeController">
  <!-- Modern Header -->
  <top>
    <VBox styleClass="header-container">
      <HBox alignment="CENTER_LEFT" spacing="16" styleClass="header">
        <padding>
          <Insets bottom="16" left="24" right="24" top="16"/>
        </padding>
        <!-- Logo/Brand -->
        <HBox alignment="CENTER_LEFT" spacing="12">
          <StackPane styleClass="logo-container">
            <Circle radius="20" styleClass="logo-circle"/>
            <Label styleClass="logo-letter" text="S"/>
          </StackPane>
          <VBox spacing="2">
            <Label styleClass="app-title" text="Shenanigans"/>
            <Label styleClass="app-subtitle" text="Employee Management"/>
          </VBox>
        </HBox>
        <Region HBox.hgrow="ALWAYS"/>
        <!-- Search -->
        <HBox alignment="CENTER_LEFT" spacing="8" styleClass="header-search-container">
          <Label styleClass="search-icon" text="ðŸ”"/>
          <TextField fx:id="searchField" prefWidth="250" promptText="Search employees..." styleClass="header-search-field"/>
        </HBox>
        <!-- Actions -->
        <Button fx:id="refreshButton" onAction="#loadEmployees" styleClass="header-icon-button" text="â†»"/>
        <!-- Loading and Status -->
        <HBox alignment="CENTER" spacing="12">
          <ProgressIndicator fx:id="loadingIndicator" maxHeight="20" maxWidth="20" visible="false"/>
          <Label fx:id="statusLabel" styleClass="status-label" text=""/>
        </HBox>
      </HBox>
    </VBox>
  </top>

  <!-- Sidebar -->
  <left>
    <VBox fx:id="sidebarContent" prefWidth="280" spacing="8" styleClass="sidebar">
      <padding>
        <Insets bottom="24" left="20" right="20" top="12"/>
      </padding>
      <!-- Sidebar Toggle (match dashboard) -->
      <HBox alignment="CENTER" spacing="0" style="-fx-padding:0 0 8 0;">
        <children>
          <Button fx:id="sidebarToggleButton" ellipsisString="+" mnemonicParsing="false" onAction="#handleSidebarToggle" prefHeight="28.0" prefWidth="239.0" styleClass="sidebar-toggle-button,sidebar-toggle-large" text="collapse"/>
        </children>
      </HBox>
      <!-- Navigation Section -->
      <Label fx:id="menuHeaderLabel" styleClass="menu-header" text="MAIN MENU"/>
      <VBox fx:id="mainMenuSection" spacing="6" styleClass="menu-section">
        <Button fx:id="dashboardButton" graphicTextGap="14" maxWidth="Infinity" onAction="#handleDashboard" styleClass="menu-button" text="ðŸ  Dashboard"/>
        <Button fx:id="employeesButton" graphicTextGap="14" maxWidth="Infinity" styleClass="menu-button,menu-button-active" text="ðŸ‘¥ Employees"/>
        <Button fx:id="projectsButton" graphicTextGap="14" maxWidth="Infinity" onAction="#handleProjects" styleClass="menu-button" text="ðŸ“‹ Projects"/>
        <Button fx:id="financeButton" graphicTextGap="14" maxWidth="Infinity" onAction="#handleFinance" styleClass="menu-button" text="ðŸ’° Finance"/>
      </VBox>
      <Region prefHeight="20"/>
      <Label fx:id="settingsHeaderLabel" styleClass="menu-header" text="SETTINGS"/>
      <VBox fx:id="settingsSection" spacing="6">
        <Button fx:id="settingsButton" graphicTextGap="14" maxWidth="Infinity" onAction="#handleSettings" styleClass="menu-button,menu-button-secondary" text="Settings">
          <graphic>
            <Label styleClass="menu-icon" text="âš™ï¸"/>
          </graphic>
        </Button>
      </VBox>
      <Region VBox.vgrow="ALWAYS"/>
      <!-- System Info -->
      <VBox fx:id="systemInfoCard" spacing="8" styleClass="system-info-card">
        <Label fx:id="systemInfoTitle" styleClass="system-info-title" text="System Status"/>
        <HBox alignment="CENTER_LEFT" spacing="8">
          <StackPane styleClass="status-dot status-dot-online"/>
          <Label fx:id="systemInfoText" styleClass="system-info-text" text="All systems operational"/>
        </HBox>
      </VBox>
    </VBox>
  </left>

  <!-- Main Content - Employee Cards by Type -->
  <center>
    <ScrollPane fitToHeight="true" fitToWidth="true" styleClass="content-scroll">
      <VBox spacing="24" styleClass="content-area">
        <padding>
          <Insets bottom="24" left="24" right="24" top="24"/>
        </padding>
        <!-- Employee Kanban Columns -->
        <HBox spacing="20" styleClass="kanban-board" VBox.vgrow="ALWAYS">
          <!-- Active Employees Column -->
          <VBox spacing="0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="6.0" styleClass="kanban-column-header,kanban-header,kanban-header-active">
              <Label styleClass="kanban-column-icon" text="âœ“"/>
              <Label styleClass="kanban-column-title" text="Active"/>
              <Region HBox.hgrow="ALWAYS"/>
              <Label fx:id="activeColumnCount" styleClass="kanban-column-count" text="0"/>
              <padding>
                <Insets bottom="8.0" left="8.0" right="8.0" top="8.0"/>
              </padding>
            </HBox>
            <ScrollPane fitToWidth="true" styleClass="kanban-scroll" VBox.vgrow="ALWAYS">
              <VBox fx:id="activeEmployeesContainer" spacing="12" styleClass="kanban-cards-container">
                <padding>
                  <Insets bottom="16" left="16" right="16" top="16"/>
                </padding>
              </VBox>
            </ScrollPane>
          </VBox>
          <!-- On Leave Employees Column -->
          <VBox spacing="0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="6.0" styleClass="kanban-column-header,kanban-header,kanban-header-leave">
              <Label styleClass="kanban-column-icon" text="ðŸ–"/>
              <Label styleClass="kanban-column-title" text="On Leave"/>
              <Region HBox.hgrow="ALWAYS"/>
              <Label fx:id="leaveColumnCount" styleClass="kanban-column-count" text="0"/>
              <padding>
                <Insets bottom="8.0" left="8.0" right="8.0" top="8.0"/>
              </padding>
            </HBox>
            <ScrollPane fitToWidth="true" styleClass="kanban-scroll" VBox.vgrow="ALWAYS">
              <VBox fx:id="onLeaveEmployeesContainer" spacing="12" styleClass="kanban-cards-container">
                <padding>
                  <Insets bottom="16" left="16" right="16" top="16"/>
                </padding>
              </VBox>
            </ScrollPane>
          </VBox>
          <!-- Terminated Employees Column -->
          <VBox spacing="0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="6.0" styleClass="kanban-column-header,kanban-header,kanban-header-terminated">
              <Label styleClass="kanban-column-icon" text="âœ—"/>
              <Label styleClass="kanban-column-title" text="Terminated"/>
              <Region HBox.hgrow="ALWAYS"/>
              <Label fx:id="terminatedColumnCount" styleClass="kanban-column-count" text="0"/>
              <padding>
                <Insets bottom="8.0" left="8.0" right="8.0" top="8.0"/>
              </padding>
            </HBox>
            <ScrollPane fitToWidth="true" styleClass="kanban-scroll" VBox.vgrow="ALWAYS">
              <VBox fx:id="terminatedEmployeesContainer" spacing="12" styleClass="kanban-cards-container">
                <padding>
                  <Insets bottom="16" left="16" right="16" top="16"/>
                </padding>
              </VBox>
            </ScrollPane>
          </VBox>
        </HBox>
      </VBox>
    </ScrollPane>
  </center>
</BorderPane>

<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.shenanigans.features.auth.controller.AuthController"
            styleClass="auth-container"
            stylesheets="@../styles/auth.css">
  <center>
    <ScrollPane fitToWidth="true" fitToHeight="true" style="-fx-background-color: transparent; -fx-background: transparent;">
      <StackPane style="-fx-background-color: transparent;">
        <VBox alignment="CENTER" spacing="20" maxWidth="400">
          <padding>
            <Insets top="40" right="40" bottom="40" left="40"/>
          </padding>
          <!-- App Title -->
          <Label text="Shenanigans" styleClass="app-title"/>
          <Label text="Enterprise Management System" styleClass="app-subtitle"/>
          <!-- Loading Indicator -->
          <ProgressIndicator fx:id="loadingIndicator" visible="false"/>
          <!-- Status Label -->
          <Label fx:id="statusLabel" styleClass="status-label" wrapText="true"/>
          <!-- Login Pane -->
          <VBox fx:id="loginPane" spacing="15" styleClass="auth-form">
            <Label text="Sign In" styleClass="form-title"/>
            <VBox spacing="5">
              <Label text="Email" styleClass="field-label"/>
              <TextField fx:id="loginEmailField" promptText="Enter your email" styleClass="auth-field"/>
            </VBox>
            <VBox spacing="5">
              <Label text="Password" styleClass="field-label"/>
              <PasswordField fx:id="loginPasswordField" promptText="Enter your password" styleClass="auth-field"/>
            </VBox>
            <Button fx:id="loginButton" text="Sign In" onAction="#handleLogin" styleClass="primary-button" maxWidth="Infinity"/>
            <HBox alignment="CENTER" spacing="20">
              <Hyperlink fx:id="forgotPasswordLink" text="Forgot Password?" onAction="#showForgotPasswordPane"/>
              <Hyperlink fx:id="createAccountLink" text="Create Account" onAction="#showRegisterPane"/>
            </HBox>
          </VBox>
          <!-- Register Pane -->
          <VBox fx:id="registerPane" spacing="15" styleClass="auth-form" visible="false" managed="false">
            <Label text="Create Account" styleClass="form-title"/>
            <VBox spacing="5">
              <Label text="Display Name" styleClass="field-label"/>
              <TextField fx:id="displayNameField" promptText="Enter your name" styleClass="auth-field"/>
            </VBox>
            <VBox spacing="5">
              <Label text="Email" styleClass="field-label"/>
              <TextField fx:id="registerEmailField" promptText="Enter your email" styleClass="auth-field"/>
            </VBox>
            <VBox spacing="5">
              <Label text="Password" styleClass="field-label"/>
              <PasswordField fx:id="registerPasswordField" promptText="At least 6 characters" styleClass="auth-field"/>
            </VBox>
            <VBox spacing="5">
              <Label text="Confirm Password" styleClass="field-label"/>
              <PasswordField fx:id="confirmPasswordField" promptText="Confirm your password" styleClass="auth-field"/>
            </VBox>
            <VBox spacing="5">
              <Label text="Role" styleClass="field-label"/>
              <ComboBox fx:id="roleComboBox" styleClass="auth-field" maxWidth="Infinity"/>
            </VBox>
            <Button fx:id="registerButton" text="Create Account" onAction="#handleRegister" styleClass="primary-button" maxWidth="Infinity"/>
            <HBox alignment="CENTER">
              <Hyperlink fx:id="backToLoginLink" text="Back to Sign In" onAction="#showLoginPane"/>
            </HBox>
          </VBox>
          <!-- Forgot Password Pane -->
          <VBox fx:id="forgotPasswordPane" spacing="15" styleClass="auth-form" visible="false" managed="false">
            <Label text="Reset Password" styleClass="form-title"/>
            <Label text="Enter your email address and we'll send you a link to reset your password." styleClass="form-description" wrapText="true"/>
            <VBox spacing="5">
              <Label text="Email" styleClass="field-label"/>
              <TextField fx:id="resetEmailField" promptText="Enter your email" styleClass="auth-field"/>
            </VBox>
            <Button fx:id="resetPasswordButton" text="Send Reset Link" onAction="#handlePasswordReset" styleClass="primary-button" maxWidth="Infinity"/>
            <HBox alignment="CENTER">
              <Hyperlink fx:id="backToLoginFromResetLink" text="Back to Sign In" onAction="#showLoginPane"/>
            </HBox>
          </VBox>
        </VBox>
      </StackPane>
    </ScrollPane>
  </center>
</BorderPane>

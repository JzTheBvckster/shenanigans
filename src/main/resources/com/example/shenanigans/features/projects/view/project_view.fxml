<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.paint.LinearGradient?>
<?import javafx.scene.paint.Stop?>

<BorderPane styleClass="project-root" stylesheets="@../styles/project.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.shenanigans.features.projects.controller.ProjectController">
  <!-- Modern Header -->
  <top>
    <VBox styleClass="header-container">
      <HBox alignment="CENTER_LEFT" spacing="16" styleClass="header">
        <padding>
          <Insets bottom="16" left="24" right="24" top="16" />
        </padding>
        <!-- Back Button -->
        <Button onAction="#handleBack" styleClass="back-button" text="â†" />
        <!-- Page Title -->
        <VBox spacing="2">
          <Label styleClass="page-title" text="Projects" />
          <Label styleClass="page-subtitle" text="Manage and track your projects" />
        </VBox>
        <Region HBox.hgrow="ALWAYS" />
        <!-- Search -->
        <HBox alignment="CENTER_LEFT" spacing="8" styleClass="header-search-container">
          <Label styleClass="search-icon" text="ðŸ”" />
          <TextField fx:id="searchField" prefWidth="250" promptText="Search projects..." styleClass="header-search-field" />
        </HBox>
        <!-- Actions -->
        <Button fx:id="refreshButton" onAction="#loadProjects" styleClass="header-icon-button" text="â†»" />
        <Button fx:id="addButton" onAction="#handleAddProject" styleClass="header-primary-button" text="+ New Project" />
        <!-- Loading and Status -->
        <HBox alignment="CENTER" spacing="12">
          <ProgressIndicator fx:id="loadingIndicator" maxHeight="20" maxWidth="20" visible="false" />
          <Label fx:id="statusLabel" styleClass="status-label" text="" />
        </HBox>
      </HBox>
    </VBox>
  </top>

  <!-- Main Content - Kanban Board -->
  <center>
    <ScrollPane fitToHeight="true" fitToWidth="true" styleClass="content-scroll">
      <VBox spacing="24" styleClass="content-area">
        <padding>
          <Insets bottom="24" left="24" right="24" top="24" />
        </padding>
        <!-- Stats Cards Row -->
        <HBox spacing="20" styleClass="stats-row">
          <!-- Total Projects Card -->
          <VBox alignment="CENTER_LEFT" spacing="8" styleClass="stat-card stat-card-blue" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="12">
              <StackPane styleClass="stat-icon-container stat-icon-blue">
                <Label styleClass="stat-icon" text="ðŸ“" textFill="#2a63d7" />
              </StackPane>
              <VBox alignment="TOP_CENTER" spacing="2">
                <Label fx:id="totalCountLabel" styleClass="stat-value" text="0" />
                <Label styleClass="stat-label" text="Total Projects" />
              </VBox>
            </HBox>
          </VBox>
          <!-- New Projects Card -->
          <VBox alignment="CENTER_LEFT" spacing="8" styleClass="stat-card stat-card-purple" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="12">
              <StackPane styleClass="stat-icon-container stat-icon-purple">
                <Label styleClass="stat-icon" text="âœ¨" textFill="#2a63d7" />
              </StackPane>
              <VBox alignment="TOP_CENTER" spacing="2">
                <Label fx:id="newCountLabel" styleClass="stat-value" text="0" />
                <Label styleClass="stat-label" text="New / Planning" />
              </VBox>
            </HBox>
          </VBox>
          <!-- Pending/In Progress Card -->
          <VBox alignment="CENTER_LEFT" spacing="8" styleClass="stat-card stat-card-orange" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="12">
              <StackPane styleClass="stat-icon-container stat-icon-orange">
                <Label styleClass="stat-icon" text="â³" textFill="#2a63d7" />
              </StackPane>
              <VBox alignment="TOP_CENTER" spacing="2">
                <Label fx:id="activeCountLabel" styleClass="stat-value" text="0" />
                <Label styleClass="stat-label" text="In Progress" />
              </VBox>
            </HBox>
          </VBox>
          <!-- Completed Card -->
          <VBox alignment="CENTER_LEFT" spacing="8" styleClass="stat-card stat-card-green" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="12">
              <StackPane styleClass="stat-icon-container stat-icon-green">
                <Label styleClass="stat-icon" text="âœ“" textFill="#2a63d7" />
              </StackPane>
              <VBox alignment="TOP_CENTER" spacing="2">
                <Label fx:id="completedCountLabel" styleClass="stat-value" text="0" />
                <Label styleClass="stat-label" text="Completed" />
              </VBox>
            </HBox>
          </VBox>
        </HBox>
        <!-- Kanban Board -->
        <HBox spacing="20" styleClass="kanban-board" VBox.vgrow="ALWAYS">
          <!-- New / Planning Column -->
          <VBox spacing="0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="2.0" style="-fx-background-color: #2b64d6b0; -fx-background-radius: 16;">
              <Label styleClass="kanban-column-icon" text="âœ¨" textFill="WHITE">
                        <padding>
                           <Insets left="8.0" top="4.0" />
                        </padding></Label>
              <Label styleClass="kanban-column-title" text="New / Planning" textFill="#5978eb">
                        <padding>
                           <Insets left="8.0" top="4.0" />
                        </padding></Label>
              <Region HBox.hgrow="ALWAYS" />
              <Label fx:id="newColumnCount" styleClass="kanban-column-count" text="0" />
                     <VBox.margin>
                        <Insets />
                     </VBox.margin>
                     <padding>
                        <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
                     </padding>
            </HBox>
            <ScrollPane fitToWidth="true" styleClass="kanban-scroll" VBox.vgrow="ALWAYS">
              <VBox fx:id="newProjectsContainer" spacing="12" styleClass="kanban-cards-container">
                <padding>
                  <Insets bottom="16" left="16" right="16" top="16" />
                </padding>
              </VBox>
            </ScrollPane>
          </VBox>
          <!-- In Progress / Pending Column -->
          <VBox spacing="0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="2.0" style="-fx-background-color: #2b64d6b0; -fx-background-radius: 16;">
              <Label styleClass="kanban-column-icon" text="â³" textFill="WHITE">
                        <padding>
                           <Insets left="8.0" top="4.0" />
                        </padding>
                     </Label>
              <Label styleClass="kanban-column-title" text="In Progress">
                        <padding>
                           <Insets left="8.0" top="4.0" />
                        </padding>
                        <textFill>
                           <LinearGradient endX="1.0" endY="1.0" startY="0.7535545023696683">
                              <stops>
                                 <Stop>
                                    <color>
                                       <Color />
                                    </color>
                                 </Stop>
                                 <Stop offset="1.0">
                                    <color>
                                       <Color red="1.0" green="1.0" blue="1.0" />
                                    </color>
                                 </Stop>
                              </stops>
                           </LinearGradient>
                        </textFill>
                     </Label>
              <Region HBox.hgrow="ALWAYS" />
              <Label fx:id="pendingColumnCount" styleClass="kanban-column-count" text="0" />
                     <opaqueInsets>
                        <Insets />
                     </opaqueInsets>
                     <VBox.margin>
                        <Insets />
                     </VBox.margin>
                     <padding>
                        <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
                     </padding>
            </HBox>
            <ScrollPane fitToWidth="true" styleClass="kanban-scroll" VBox.vgrow="ALWAYS">
              <VBox fx:id="pendingProjectsContainer" spacing="12" styleClass="kanban-cards-container">
                <padding>
                  <Insets bottom="16" left="16" right="16" top="16" />
                </padding>
              </VBox>
            </ScrollPane>
          </VBox>
          <!-- Completed Column -->
          <VBox spacing="0" styleClass="kanban-column" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" prefHeight="47.0" prefWidth="350.0" spacing="2.0" style="-fx-background-color: #2b64d6b0; -fx-background-radius: 16;" styleClass="kanban-column-header kanban-header-completed">
              <Label styleClass="kanban-column-icon" text="âœ“" />
              <Label styleClass="kanban-column-title" text="Completed" />
              <Region HBox.hgrow="ALWAYS" />
              <Label fx:id="completedColumnCount" styleClass="kanban-column-count" text="0" />
                     <padding>
                        <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
                     </padding>
            </HBox>
            <ScrollPane fitToWidth="true" styleClass="kanban-scroll" VBox.vgrow="ALWAYS">
              <VBox fx:id="completedProjectsContainer" spacing="12" styleClass="kanban-cards-container">
                <padding>
                  <Insets bottom="16" left="16" right="16" top="16" />
                </padding>
              </VBox>
            </ScrollPane>
          </VBox>
        </HBox>
      </VBox>
    </ScrollPane>
  </center>
</BorderPane>
